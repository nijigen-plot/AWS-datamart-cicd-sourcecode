{
  "StartAt": "CallLambda",
  "States": {
    "CallLambda": {
      "Type": "Task",
      "Resource": "arn:aws:states:::lambda:invoke",
      "OutputPath": "$.Payload",
      "Parameters": {
        "FunctionName": "athena-query-execute",
        "Payload": {
          "bucket": "quark-cicd-test",
          "file_key": "s3/create_table_query/riiid_aggregate.sql"
        }
      },
      "Next": "QueryExecute"
    },
    "QueryExecute": {
      "Type": "Task",
      "Resource": "arn:aws:states:::athena:startQueryExecution.sync",
      "Parameters": {
        "QueryString.$": "$.query",
        "WorkGroup": "primary"
      },
      "End": true
    }
  }
}